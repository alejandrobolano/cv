<h2 nz-typography>Messages of clients</h2>

<button nz-button nzType="primary" [disabled]="setOfCheckedId.size === 0" [nzLoading]="loadingDelete"
        (click)="deleteSelected()">
  Delete
</button>

<button nz-button nzType="info" [disabled]="setOfCheckedId.size === 0" [nzLoading]="loadingRead"
        (click)="updateReadStateOfSelected(true)">
  Read
</button>
<button nz-button nzType="info" [disabled]="setOfCheckedId.size === 0" [nzLoading]="loadingUnread"
        (click)="updateReadStateOfSelected(false)">
  Unread
</button>

<nz-table #basicTable [nzData]="messagesWeb" nzTableLayout="fixed"
          (nzCurrentPageDataChange)="onCurrentPageDataChange($event)">
  <thead>
  <tr>
    <ng-container *ngTemplateOutlet="thead"></ng-container>
  </tr>
  </thead>
  <tbody>
  <ng-container *ngTemplateOutlet="tbody"></ng-container>
  </tbody>
</nz-table>

<ng-template #thead>
  <th [nzChecked]="checked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="onAllChecked($event)"></th>
  <th>Name</th>
  <th>Email</th>
  <th>Country</th>
  <th>Subject</th>
  <th>Message</th>
  <th *ngIf="!hideColumns">Language</th>
  <th *ngIf="!hideColumns">Ip</th>
</ng-template>

<ng-template #tbody>
  <tr *ngFor="let data of basicTable.data; let i = index"
      [style.color]="!data.isRead ? '#00A9A5' : '#'">
    <td
      [nzChecked]="setOfCheckedId.has(data.id)"
      [nzDisabled]="data.disabled"
      (nzCheckedChange)="onItemChecked(data.id, $event)"
    ></td>
    <td>{{data.name}}</td>
    <td>{{data.email}}</td>
    <td><span class="flag-icon flag-icon-{{data.country}}"></span> {{data.countryName}}</td>
    <td>{{data.subject}}</td>
    <td>{{data.message}}</td>
    <td *ngIf="!hideColumns"><span class="flag-icon flag-icon-{{getCountryCode(data.language)}}"></span></td>
    <td *ngIf="!hideColumns">{{data.ip}}</td>
  </tr>
</ng-template>
